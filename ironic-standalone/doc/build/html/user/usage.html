<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"/>

    <title>OpenStack Docs: Usage</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Bootstrap CSS -->
<link href="../_static/css/bootstrap.min.css" rel="stylesheet">

<!-- Pygments CSS -->
<link href="../_static/css/native.css" rel="stylesheet">

<!-- Fonts -->
<link href="../_static/css/font-awesome.min.css" rel="stylesheet">

<!-- Custom CSS -->
<link href="../_static/css/combined.css" rel="stylesheet">

<!-- Search CSS -->
<link href="../_static/css/search.css" rel="stylesheet">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->
  


<!-- Google Analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-17511903-1', 'auto');
ga('send', 'pageview');
</script>
<!-- End Google Analytics -->

  </head>
  <body>

<!-- SOURCE_FILE: https://git.openstack.org/cgit/openstack/ironic-inspector/tree/doc/source/user/usage.rst -->

 <script>
    (function (window, document) {
        var loader = function () {
            var script = document.createElement("script"), tag = document.getElementsByTagName("script")[0];
            script.src = "https://search.openstack.org/widget/embed.min.js?t="+Date.now();
            tag.parentNode.insertBefore(script, tag);
        };
        window.addEventListener ? window.addEventListener("load", loader, false) : window.attachEvent("onload", loader);
    })(window, document);
</script>
<nav class="navbar navbar-default" role="navigation">
  <div class="container">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button class="navbar-toggle" data-target="#bs-example-navbar-collapse-1" data-toggle="collapse" type="button">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <div class="brand-wrapper">
        <a class="navbar-brand" href="https://www.openstack.org/"></a>
      </div>
      <div class="search-icon show"><i class="fa fa-search"></i> Search</div></div>
      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <div class="search-container tiny">
    <div class="openstack-search-bar" data-baseUrl="search.openstack.org" data-context="docs-openstack"></div>
</div>
      <ul class="nav navbar-nav navbar-main show">
        <li class="search-container-mobile">
    <div class="openstack-search-bar" data-baseUrl="search.openstack.org" data-context="docs-openstack"></div>
</li>
        <li>
          <a href="https://www.openstack.org/software/" class="drop" id="dropdownMenuSoftware">Software <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuSoftware">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/software/">Overview</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/software/project-navigator/">Project Navigator</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/software/sample-configs/">Sample Configs</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/software/security/">Security</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/software/start/">Get Started</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/software/roadmap/">Roadmap</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/software/latest-release/">Latest Release</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/software/sourcecode/">Source Code</a></li>
          </ul>
        </li>
        <li>
          <a href="https://www.openstack.org/user-stories/" class="drop" id="dropdownMenuUsers">Users <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuUsers">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/user-stories/">Overview</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/telecoms-and-nfv/">Telecoms and NFV</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/enterprise/">OpenStack in the Enterprise</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/appdev/">Application Developers & ISVs</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://superuser.openstack.org/">Superuser Magazine</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/surveys/landing">User Survey</a></li>
          </ul>
        </li>
        <li>
          <a href="https://www.openstack.org/community/" class="drop" id="dropdownMenuCommunity">Community <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuCommunity">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/community/">Welcome! Start Here</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/foundation/">OpenStack Foundation</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://wiki.openstack.org">OpenStack Wiki</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://groups.openstack.org">User Groups</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/community/speakers/">Speakers Bureau</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/foundation/companies/">Supporting Companies</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/community/jobs/">Jobs</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/join/">Join The Community</a></li>
          </ul>
        </li>
        <li>
          <a href="https://www.openstack.org/marketplace/">Marketplace</a>
        </li>
        <li>
          <a href="https://www.openstack.org/events/" class="drop" id="dropdownMenuEvents">Events <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuEvents">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="//www.openstack.org/community/events/">Overview</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/summit/">The OpenStack Summit</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="//www.openstack.org/community/events/">More OpenStack Events</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/community/events/openstackdays">OpenStack Days</a></li>
          </ul>
        </li>
        <li>
          <a href="https://www.openstack.org/learn/" class="drop" id="dropdownMenuLearn">Learn <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu dropdown-hover" role="menu" aria-labelledby="dropdownMenuEvents">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/marketplace/training/">Training</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/coa/">Get Certified</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="//ask.openstack.org">Ask a Technical Question</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="//superuser.openstack.org">Superuser Magazine</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/videos/">Summit Videos</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/analysts/">Analyst Reports</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/news/">News</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/blog/">Blog</a></li>
          </ul>
        </li>
        <li>
          <a href="https://docs.openstack.org/">Docs</a>
        </li>
        <li>

</li>


            <li>

                <li class="join-nav-section">
                    <a href="https://www.openstack.org/join/" id="dropdownMenuJoin">Join <i class="fa fa-caret-down"></i></a>
                    <ul class="dropdown-menu dropdown-hover" role="menu" aria-labelledby="dropdownMenuJoin" style="display: none;">
                        <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/join/register/?membership-type=foundation">Sign up for Foundation Membership</a></li>
                        <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/join/#sponsor">Sponsor the Foundation</a></li>
                        <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/foundation">More about the Foundation</a></li>
                    </ul>
                </li>
                <li>
                    <a href="https://www.openstack.org/Security/login/?BackURL=/home/" class="sign-in-btn">Log In</a>
                </li>

            </li>
      </ul>
    </div>
  </div>
  <!-- /.container -->
</nav>
    <div class="container docs-book-wrapper">
      <div class="row">
        <div class="col-lg-9 col-md-8 col-sm-8 col-lg-push-3 col-md-push-4 col-sm-push-4">
<div class="row">
  <div class="col-lg-8">
      <h2>Usage</h2>
    
  </div>
  <div class="docs-actions">
    
    <a href="workflow.html"><i class="fa fa-angle-double-left" data-toggle="tooltip" data-placement="top" title="Previous: How Ironic Inspector Works"></i></a>
    
    
    <a href="http-api.html"><i class="fa fa-angle-double-right" data-toggle="tooltip" data-placement="top" title="Next: HTTP API"></i></a>
    
    <a id="logABugLink1" href="" target="_blank" title="Found an error? Report a bug against this page"><i class="fa fa-bug" data-toggle="tooltip" data-placement="top" title="Report a Bug"></i></a>
    
  </div>
</div>
          <div class="row docs-byline">
            <div class="docs-updated">updated: 2019-10-31 19:28</div>
          </div>
          <div class="row">
            <div class="col-lg-12">
              <div class="docs-body">

  <div class="section" id="usage">
<h1>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h1>
<p id="usage-guide">Refer to <a class="reference internal" href="http-api.html#id1"><span class="std std-ref">api</span></a> for information on the HTTP API.
Refer to the <a class="reference external" href="https://docs.openstack.org/python-ironic-inspector-client/latest/">client documentation</a> for information on how to use CLI and
Python library.</p>
<div class="section" id="using-from-ironic-api">
<h2>Using from Ironic API<a class="headerlink" href="#using-from-ironic-api" title="Permalink to this headline">¶</a></h2>
<p>Ironic Kilo introduced support for hardware introspection under name of
“inspection”. <strong>ironic-inspector</strong> introspection is supported for some generic
drivers, please refer to <a class="reference external" href="https://docs.openstack.org/ironic/latest/admin/inspection.html">Ironic inspection documentation</a> for details.</p>
</div>
<div class="section" id="node-states">
<h2>Node States<a class="headerlink" href="#node-states" title="Permalink to this headline">¶</a></h2>
<ul id="id1">
<li><p class="first">The nodes should be moved to <code class="docutils literal notranslate"><span class="pre">MANAGEABLE</span></code> provision state before
introspection (requires <em>python-ironicclient</em> of version 0.5.0 or newer):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">openstack</span> <span class="n">baremetal</span> <span class="n">node</span> <span class="n">manage</span> <span class="o">&lt;</span><span class="n">node</span><span class="o">&gt;</span>
</pre></div>
</div>
</li>
<li><p class="first">After successful introspection and before deploying nodes should be made
available to Nova, by moving them to <code class="docutils literal notranslate"><span class="pre">AVAILABLE</span></code> state:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">openstack</span> <span class="n">baremetal</span> <span class="n">node</span> <span class="n">provide</span> <span class="o">&lt;</span><span class="n">node</span><span class="o">&gt;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Due to how Nova interacts with Ironic driver, you should wait 1 minute
before Nova becomes aware of available nodes after issuing this command.
Use <code class="docutils literal notranslate"><span class="pre">nova</span> <span class="pre">hypervisor-stats</span></code> command output to check it.</p>
</div>
</li>
</ul>
</div>
<div class="section" id="introspection-rules">
<h2>Introspection Rules<a class="headerlink" href="#introspection-rules" title="Permalink to this headline">¶</a></h2>
<p id="id2">Inspector supports a simple JSON-based DSL to define rules to run during
introspection. Inspector provides an API to manage such rules, and will run
them automatically after running all processing hooks.</p>
<p>A rule consists of conditions to check, and actions to run. If conditions
evaluate to true on the introspection data, then actions are run on a node.</p>
<p>Available conditions and actions are defined by plugins, and can be extended,
see <a class="reference internal" href="../contributor/index.html#contributing-link"><span class="std std-ref">How To Contribute</span></a> for details. See <a class="reference internal" href="http-api.html#id1"><span class="std std-ref">api</span></a> for
specific calls to define introspection rules.</p>
<div class="section" id="conditions">
<h3>Conditions<a class="headerlink" href="#conditions" title="Permalink to this headline">¶</a></h3>
<p>A condition is represented by an object with fields:</p>
<p><code class="docutils literal notranslate"><span class="pre">op</span></code> the type of comparison operation, default available operators include:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">eq</span></code>, <code class="docutils literal notranslate"><span class="pre">le</span></code>, <code class="docutils literal notranslate"><span class="pre">ge</span></code>, <code class="docutils literal notranslate"><span class="pre">ne</span></code>, <code class="docutils literal notranslate"><span class="pre">lt</span></code>, <code class="docutils literal notranslate"><span class="pre">gt</span></code> - basic comparison operators;</li>
<li><code class="docutils literal notranslate"><span class="pre">in-net</span></code> - checks that an IP address is in a given network;</li>
<li><code class="docutils literal notranslate"><span class="pre">matches</span></code> - requires a full match against a given regular expression;</li>
<li><code class="docutils literal notranslate"><span class="pre">contains</span></code> - requires a value to contain a given regular expression;</li>
<li><code class="docutils literal notranslate"><span class="pre">is-empty</span></code> - checks that field is an empty string, list, dict or
None value.</li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">field</span></code> a <a class="reference external" href="http://goessner.net/articles/JsonPath/">JSON path</a> to the field
in the introspection data to use in comparison.</p>
<p>Starting with the Mitaka release, you can also apply conditions to ironic node
field. Prefix field with schema (<code class="docutils literal notranslate"><span class="pre">data://</span></code> or <code class="docutils literal notranslate"><span class="pre">node://</span></code>) to distinguish
between values from introspection data and node. Both schemes use JSON path:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s2">&quot;field&quot;</span><span class="p">:</span> <span class="s2">&quot;node://property.path&quot;</span><span class="p">,</span> <span class="s2">&quot;op&quot;</span><span class="p">:</span> <span class="s2">&quot;eq&quot;</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;val&quot;</span><span class="p">}</span>
<span class="p">{</span><span class="s2">&quot;field&quot;</span><span class="p">:</span> <span class="s2">&quot;data://introspection.path&quot;</span><span class="p">,</span> <span class="s2">&quot;op&quot;</span><span class="p">:</span> <span class="s2">&quot;eq&quot;</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;val&quot;</span><span class="p">}</span>
</pre></div>
</div>
<p>if scheme (node or data) is missing, condition compares data with
introspection data.</p>
<p><code class="docutils literal notranslate"><span class="pre">invert</span></code> boolean value, whether to invert the result of the comparison.</p>
<p><code class="docutils literal notranslate"><span class="pre">multiple</span></code> how to treat situations where the <code class="docutils literal notranslate"><span class="pre">field</span></code> query returns multiple
results (e.g. the field contains a list), available options are:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">any</span></code> (the default) require any to match,</li>
<li><code class="docutils literal notranslate"><span class="pre">all</span></code> require all to match,</li>
<li><code class="docutils literal notranslate"><span class="pre">first</span></code> requrie the first to match.</li>
</ul>
<p>All other fields are passed to the condition plugin, e.g. numeric comparison
operations require a <code class="docutils literal notranslate"><span class="pre">value</span></code> field to compare against.</p>
</div>
<div class="section" id="actions">
<h3>Actions<a class="headerlink" href="#actions" title="Permalink to this headline">¶</a></h3>
<p>An action is represented by an object with fields:</p>
<p><code class="docutils literal notranslate"><span class="pre">action</span></code> type of action. Possible values are defined by plugins.</p>
<p>All other fields are passed to the action plugin.</p>
<p>Default available actions include:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">fail</span></code> fail introspection. Requires a <code class="docutils literal notranslate"><span class="pre">message</span></code> parameter for the failure
message.</li>
<li><code class="docutils literal notranslate"><span class="pre">set-attribute</span></code> sets an attribute on an Ironic node. Requires a <code class="docutils literal notranslate"><span class="pre">path</span></code>
field, which is the path to the attribute as used by ironic (e.g.
<code class="docutils literal notranslate"><span class="pre">/properties/something</span></code>), and a <code class="docutils literal notranslate"><span class="pre">value</span></code> to set.</li>
<li><code class="docutils literal notranslate"><span class="pre">set-capability</span></code> sets a capability on an Ironic node. Requires <code class="docutils literal notranslate"><span class="pre">name</span></code>
and <code class="docutils literal notranslate"><span class="pre">value</span></code> fields, which are the name and the value for a new capability
accordingly. Existing value for this same capability is replaced.</li>
<li><code class="docutils literal notranslate"><span class="pre">extend-attribute</span></code> the same as <code class="docutils literal notranslate"><span class="pre">set-attribute</span></code>, but treats existing
value as a list and appends value to it. If optional <code class="docutils literal notranslate"><span class="pre">unique</span></code> parameter is
set to <code class="docutils literal notranslate"><span class="pre">True</span></code>, nothing will be added if given value is already in a list.</li>
</ul>
<p>Starting from Mitaka release, <code class="docutils literal notranslate"><span class="pre">value</span></code> field in actions supports fetching data
from introspection, using <a class="reference external" href="https://docs.python.org/2/library/string.html#formatspec">python string formatting notation</a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s2">&quot;action&quot;</span><span class="p">:</span> <span class="s2">&quot;set-attribute&quot;</span><span class="p">,</span> <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;/driver_info/ipmi_address&quot;</span><span class="p">,</span>
 <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;</span><span class="si">{data[inventory][bmc_address]}</span><span class="s2">&quot;</span><span class="p">}</span>
</pre></div>
</div>
<p>Note that any value referenced in this way will be converted to a string.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">value</span></code> is a dict or list, strings nested at any level within the
structure will be formatted as well:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s2">&quot;action&quot;</span><span class="p">:</span> <span class="s2">&quot;set-attribute&quot;</span><span class="p">,</span> <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;/properties/root_device&quot;</span><span class="p">,</span>
 <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;serial&quot;</span><span class="p">:</span> <span class="s2">&quot;</span><span class="si">{data[root_device][serial]}</span><span class="s2">&quot;</span><span class="p">}}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="plugins">
<h2>Plugins<a class="headerlink" href="#plugins" title="Permalink to this headline">¶</a></h2>
<p id="introspection-plugins"><strong>ironic-inspector</strong> heavily relies on plugins for data processing. Even the
standard functionality is largely based on plugins. Set <code class="docutils literal notranslate"><span class="pre">processing_hooks</span></code>
option in the configuration file to change the set of plugins to be run on
introspection data. Note that order does matter in this option, especially
for hooks that have dependencies on other hooks.</p>
<p>These are plugins that are enabled by default and should not be disabled,
unless you understand what you’re doing:</p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">scheduler</span></code></dt>
<dd><p class="first">validates and updates basic hardware scheduling properties: CPU number and
architecture, memory and disk size.</p>
<div class="last admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Diskless nodes have the disk size property <code class="docutils literal notranslate"><span class="pre">local_gb</span> <span class="pre">==</span> <span class="pre">0</span></code>. Always use
node driver <code class="docutils literal notranslate"><span class="pre">root_device</span></code> hints to prevent unexpected HW failures
passing silently.</p>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">validate_interfaces</span></code> validates network interfaces information. Creates new</dt>
<dd>ports, optionally deletes ports that were not present in the introspection
data. Also sets the <code class="docutils literal notranslate"><span class="pre">pxe_enabled</span></code> flag for the PXE-booting port and
unsets it for all the other ports to avoid <strong>nova</strong> picking a random port
to boot the node.</dd>
</dl>
<p>The following plugins are enabled by default, but can be disabled if not
needed:</p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">ramdisk_error</span></code></dt>
<dd>reports error, if <code class="docutils literal notranslate"><span class="pre">error</span></code> field is set by the ramdisk, also optionally
stores logs from <code class="docutils literal notranslate"><span class="pre">logs</span></code> field, see <a class="reference internal" href="http-api.html#id1"><span class="std std-ref">api</span></a> for details.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">capabilities</span></code></dt>
<dd>detect node capabilities: CPU, boot mode, etc. See <a class="reference internal" href="#capabilities-detection">Capabilities
Detection</a> for more details.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">pci_devices</span></code></dt>
<dd>gathers the list of all PCI devices returned by the ramdisk and compares to
those defined in <code class="docutils literal notranslate"><span class="pre">alias</span></code> field(s) from <code class="docutils literal notranslate"><span class="pre">pci_devices</span></code> section of
configuration file. The recognized PCI devices and their count are then
stored in node properties. This information can be later used in nova
flavors for node scheduling.</dd>
</dl>
<p>Here are some plugins that can be additionally enabled:</p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">example</span></code></dt>
<dd>example plugin logging it’s input and output.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">raid_device</span></code></dt>
<dd>gathers block devices from ramdisk and exposes root device in multiple
runs.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">extra_hardware</span></code></dt>
<dd>stores the value of the ‘data’ key returned by the ramdisk as a JSON
encoded string in a Swift object. The plugin will also attempt to convert
the data into a format usable by introspection rules. If this is successful
then the new format will be stored in the ‘extra’ key. The ‘data’ key is
then deleted from the introspection data, as unless converted it’s assumed
unusable by introspection rules.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">local_link_connection</span></code></dt>
<dd>Processes LLDP data returned from inspection specifically looking for the
port ID and chassis ID, if found it configures the local link connection
information on the nodes Ironic ports with that data. To enable LLDP in the
inventory from IPA <code class="docutils literal notranslate"><span class="pre">ipa-collect-lldp=1</span></code> should be passed as a kernel
parameter to the IPA ramdisk.  In order to avoid processing the raw LLDP
data twice, the <code class="docutils literal notranslate"><span class="pre">lldp_basic</span></code> plugin should also be installed and run
prior to this plugin.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">lldp_basic</span></code></dt>
<dd>Processes LLDP data returned from inspection and parses TLVs from the
Basic Management (802.1AB), 802.1Q, and 802.3 sets and stores the
processed data back to the Ironic inspector data in Swift.</dd>
</dl>
<p>Refer to <a class="reference internal" href="../contributor/index.html#contributing-link"><span class="std std-ref">How To Contribute</span></a> for information on how to write your
own plugin.</p>
</div>
<div class="section" id="discovery">
<h2>Discovery<a class="headerlink" href="#discovery" title="Permalink to this headline">¶</a></h2>
<p>Starting from Mitaka, <strong>ironic-inspector</strong> is able to register new nodes
in Ironic.</p>
<p>The existing <code class="docutils literal notranslate"><span class="pre">node-not-found-hook</span></code> handles what happens if
<strong>ironic-inspector</strong> receives inspection data from a node it can not identify.
This can happen if a node is manually booted without registering it with
Ironic first.</p>
<p>For discovery, the configuration file option <code class="docutils literal notranslate"><span class="pre">node_not_found_hook</span></code> should be
set to load the hook called <code class="docutils literal notranslate"><span class="pre">enroll</span></code>. This hook will enroll the unidentified
node into Ironic using the <code class="docutils literal notranslate"><span class="pre">fake-hardware</span></code> hardware type. (This is
a configurable option; set <code class="docutils literal notranslate"><span class="pre">enroll_node_driver</span></code>, in the <strong>ironic-inspector</strong>
configuration file, to the Ironic hardware type or classic driver you want.)</p>
<p>The <code class="docutils literal notranslate"><span class="pre">enroll</span></code> hook will also set the <code class="docutils literal notranslate"><span class="pre">ipmi_address</span></code> property on the new
node, if its available in the introspection data we received,
see <a class="reference internal" href="http-api.html#id2"><span class="std std-ref">ramdisk_callback</span></a>.</p>
<p>Once the <code class="docutils literal notranslate"><span class="pre">enroll</span></code> hook is finished, <strong>ironic-inspector</strong> will process the
introspection data in the same way it would for an identified node. It runs
the processing <a class="reference internal" href="#introspection-plugins"><span class="std std-ref">plugins</span></a>, and after that it runs
introspection rules, which would allow for more customisable node
configuration, see <a class="reference internal" href="#id2"><span class="std std-ref">rules</span></a>.</p>
<p>A rule to set a node’s Ironic driver to <code class="docutils literal notranslate"><span class="pre">ipmi</span></code> and populate the required
<code class="docutils literal notranslate"><span class="pre">driver_info</span></code> for that driver would look like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[{</span>
    <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Set IPMI driver_info if no credentials&quot;</span><span class="p">,</span>
    <span class="s2">&quot;actions&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span><span class="s2">&quot;action&quot;</span><span class="p">:</span> <span class="s2">&quot;set-attribute&quot;</span><span class="p">,</span> <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;driver&quot;</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;ipmi&quot;</span><span class="p">},</span>
        <span class="p">{</span><span class="s2">&quot;action&quot;</span><span class="p">:</span> <span class="s2">&quot;set-attribute&quot;</span><span class="p">,</span> <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;driver_info/ipmi_username&quot;</span><span class="p">,</span>
         <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;username&quot;</span><span class="p">},</span>
        <span class="p">{</span><span class="s2">&quot;action&quot;</span><span class="p">:</span> <span class="s2">&quot;set-attribute&quot;</span><span class="p">,</span> <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;driver_info/ipmi_password&quot;</span><span class="p">,</span>
         <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;password&quot;</span><span class="p">}</span>
    <span class="p">],</span>
    <span class="s2">&quot;conditions&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span><span class="s2">&quot;op&quot;</span><span class="p">:</span> <span class="s2">&quot;is-empty&quot;</span><span class="p">,</span> <span class="s2">&quot;field&quot;</span><span class="p">:</span> <span class="s2">&quot;node://driver_info.ipmi_password&quot;</span><span class="p">},</span>
        <span class="p">{</span><span class="s2">&quot;op&quot;</span><span class="p">:</span> <span class="s2">&quot;is-empty&quot;</span><span class="p">,</span> <span class="s2">&quot;field&quot;</span><span class="p">:</span> <span class="s2">&quot;node://driver_info.ipmi_username&quot;</span><span class="p">}</span>
    <span class="p">]</span>
<span class="p">},{</span>
    <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Set deploy info if not already set on node&quot;</span><span class="p">,</span>
    <span class="s2">&quot;actions&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span><span class="s2">&quot;action&quot;</span><span class="p">:</span> <span class="s2">&quot;set-attribute&quot;</span><span class="p">,</span> <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;driver_info/deploy_kernel&quot;</span><span class="p">,</span>
         <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;glance uuid&gt;&quot;</span><span class="p">},</span>
        <span class="p">{</span><span class="s2">&quot;action&quot;</span><span class="p">:</span> <span class="s2">&quot;set-attribute&quot;</span><span class="p">,</span> <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;driver_info/deploy_ramdisk&quot;</span><span class="p">,</span>
         <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;glance uuid&gt;&quot;</span><span class="p">}</span>
    <span class="p">],</span>
    <span class="s2">&quot;conditions&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span><span class="s2">&quot;op&quot;</span><span class="p">:</span> <span class="s2">&quot;is-empty&quot;</span><span class="p">,</span> <span class="s2">&quot;field&quot;</span><span class="p">:</span> <span class="s2">&quot;node://driver_info.deploy_ramdisk&quot;</span><span class="p">},</span>
        <span class="p">{</span><span class="s2">&quot;op&quot;</span><span class="p">:</span> <span class="s2">&quot;is-empty&quot;</span><span class="p">,</span> <span class="s2">&quot;field&quot;</span><span class="p">:</span> <span class="s2">&quot;node://driver_info.deploy_kernel&quot;</span><span class="p">}</span>
    <span class="p">]</span>
<span class="p">}]</span>
</pre></div>
</div>
<p>All nodes discovered and enrolled via the <code class="docutils literal notranslate"><span class="pre">enroll</span></code> hook, will contain an
<code class="docutils literal notranslate"><span class="pre">auto_discovered</span></code> flag in the introspection data, this flag makes it
possible to distinguish between manually enrolled nodes and auto-discovered
nodes in the introspection rules using the rule condition <code class="docutils literal notranslate"><span class="pre">eq</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Enroll auto-discovered nodes with ipmi hardware type&quot;</span><span class="p">,</span>
    <span class="s2">&quot;actions&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span><span class="s2">&quot;action&quot;</span><span class="p">:</span> <span class="s2">&quot;set-attribute&quot;</span><span class="p">,</span> <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;driver&quot;</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;ipmi&quot;</span><span class="p">}</span>
    <span class="p">],</span>
    <span class="s2">&quot;conditions&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span><span class="s2">&quot;op&quot;</span><span class="p">:</span> <span class="s2">&quot;eq&quot;</span><span class="p">,</span> <span class="s2">&quot;field&quot;</span><span class="p">:</span> <span class="s2">&quot;data://auto_discovered&quot;</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="reapplying-introspection-on-stored-data">
<h2>Reapplying introspection on stored data<a class="headerlink" href="#reapplying-introspection-on-stored-data" title="Permalink to this headline">¶</a></h2>
<p>To allow correcting mistakes in introspection rules the API provides
an entry point that triggers the introspection over stored data.  The
data to use for processing is kept in Swift separately from the data
already processed.  Reapplying introspection overwrites processed data
in the store.  Updating the introspection data through the endpoint
isn’t supported yet.  Following preconditions are checked before
reapplying introspection:</p>
<ul class="simple">
<li>no data is being sent along with the request</li>
<li>Swift store is configured and enabled</li>
<li>introspection data is stored in Swift for the node UUID</li>
<li>node record is kept in database for the UUID</li>
<li>introspection is not ongoing for the node UUID</li>
</ul>
<p>Should the preconditions fail an immediate response is given to the
user:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">400</span></code> if the request contained data or in case Swift store is not
enabled in configuration</li>
<li><code class="docutils literal notranslate"><span class="pre">404</span></code> in case Ironic doesn’t keep track of the node UUID</li>
<li><code class="docutils literal notranslate"><span class="pre">409</span></code> if an introspection is already ongoing for the node</li>
</ul>
<p>If the preconditions are met a background task is executed to carry
out the processing and a <code class="docutils literal notranslate"><span class="pre">202</span> <span class="pre">Accepted</span></code> response is returned to the
endpoint user.  As requested, these steps are performed in the
background task:</p>
<ul class="simple">
<li>preprocessing hooks</li>
<li>post processing hooks, storing result in Swift</li>
<li>introspection rules</li>
</ul>
<p>These steps are avoided, based on the feature requirements:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">node_not_found_hook</span></code> is skipped</li>
<li>power operations</li>
<li>roll-back actions done by hooks</li>
</ul>
<p>Limitations:</p>
<ul class="simple">
<li>there’s no way to update the unprocessed data atm.</li>
<li>the unprocessed data is never cleaned from the store</li>
<li>check for stored data presence is performed in background;
missing data situation still results in a <code class="docutils literal notranslate"><span class="pre">202</span></code> response</li>
</ul>
</div>
<div class="section" id="capabilities-detection">
<h2>Capabilities Detection<a class="headerlink" href="#capabilities-detection" title="Permalink to this headline">¶</a></h2>
<p>Starting with the Newton release, <strong>Ironic Inspector</strong> can optionally discover
several node capabilities. A recent (Newton or newer) IPA image is required
for it to work.</p>
<div class="section" id="boot-mode">
<h3>Boot mode<a class="headerlink" href="#boot-mode" title="Permalink to this headline">¶</a></h3>
<p>The current boot mode (BIOS or UEFI) can be detected and recorded as
<code class="docutils literal notranslate"><span class="pre">boot_mode</span></code> capability in Ironic. It will make some drivers to change their
behaviour to account for this capability. Set the <code class="docutils literal notranslate"><span class="pre">[capabilities]boot_mode</span></code>
configuration option to <code class="docutils literal notranslate"><span class="pre">True</span></code> to enable.</p>
</div>
<div class="section" id="cpu-capabilities">
<h3>CPU capabilities<a class="headerlink" href="#cpu-capabilities" title="Permalink to this headline">¶</a></h3>
<p>Several CPU flags are detected by default and recorded as following
capabilities:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">cpu_aes</span></code> AES instructions.</li>
<li><code class="docutils literal notranslate"><span class="pre">cpu_vt</span></code> virtualization support.</li>
<li><code class="docutils literal notranslate"><span class="pre">cpu_txt</span></code> TXT support.</li>
<li><code class="docutils literal notranslate"><span class="pre">cpu_hugepages</span></code> huge pages (2 MiB) support.</li>
<li><code class="docutils literal notranslate"><span class="pre">cpu_hugepages_1g</span></code> huge pages (1 GiB) support.</li>
</ul>
<p>It is possible to define your own rules for detecting CPU capabilities.
Set the <code class="docutils literal notranslate"><span class="pre">[capabilities]cpu_flags</span></code> configuration option to a mapping between
a CPU flag and a capability, for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cpu_flags</span> <span class="o">=</span> <span class="n">aes</span><span class="p">:</span><span class="n">cpu_aes</span><span class="p">,</span><span class="n">svm</span><span class="p">:</span><span class="n">cpu_vt</span><span class="p">,</span><span class="n">vmx</span><span class="p">:</span><span class="n">cpu_vt</span>
</pre></div>
</div>
<p>See the default value of this option for a more detail example.</p>
</div>
<div class="section" id="infiniband-support">
<h3>InfiniBand support<a class="headerlink" href="#infiniband-support" title="Permalink to this headline">¶</a></h3>
<p>Starting with the Ocata release, <strong>Ironic Inspector</strong> supports detection of
InfiniBand network interfaces. A recent (Ocata or newer) IPA image is required
for that to work. When an InfiniBand network interface is discovered, the
<strong>Ironic Inspector</strong> adds a <code class="docutils literal notranslate"><span class="pre">client-id</span></code> attribute to the <code class="docutils literal notranslate"><span class="pre">extra</span></code> attribute
in the ironic port. The <strong>Ironic Inspector</strong> should be configured with
<code class="docutils literal notranslate"><span class="pre">iptables.ethoib_interfaces</span></code> to indicate the Ethernet Over InfiniBand (EoIB)
which are used for physical access access to the DHCP network.
For example if <strong>Ironic Inspector</strong> DHCP server is using <code class="docutils literal notranslate"><span class="pre">br-inspector</span></code> and
the <code class="docutils literal notranslate"><span class="pre">br-inspector</span></code> has EoIB port e.g. <code class="docutils literal notranslate"><span class="pre">eth0</span></code>,
the <code class="docutils literal notranslate"><span class="pre">iptables.ethoib_interfaces</span></code> should be set to <code class="docutils literal notranslate"><span class="pre">eth0</span></code>.
The <code class="docutils literal notranslate"><span class="pre">iptables.ethoib_interfaces</span></code> allows to map the baremetal GUID to it’s
EoIB MAC based on the neighs files. This is needed for blocking DHCP traffic
of the nodes (MACs) which are not part of the introspection.</p>
<p>The format of the <code class="docutils literal notranslate"><span class="pre">/sys/class/net/&lt;ethoib&gt;/eth/neighs</span></code> file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># EMAC=&lt;ethernet mac of the ethoib&gt; IMAC=&lt;qp number:lid:GUID&gt;</span>
<span class="c1"># For example:</span>
<span class="n">IMAC</span><span class="o">=</span><span class="mi">97</span><span class="p">:</span><span class="n">fe</span><span class="p">:</span><span class="mi">80</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">7</span><span class="n">c</span><span class="p">:</span><span class="n">fe</span><span class="p">:</span><span class="mi">90</span><span class="p">:</span><span class="mi">03</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">29</span><span class="p">:</span><span class="mi">26</span><span class="p">:</span><span class="mi">52</span>
<span class="n">qp</span> <span class="n">number</span><span class="o">=</span><span class="mi">97</span><span class="p">:</span><span class="n">fe</span>
<span class="n">lid</span><span class="o">=</span><span class="mi">80</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span>
<span class="n">GUID</span><span class="o">=</span><span class="mi">7</span><span class="n">c</span><span class="p">:</span><span class="n">fe</span><span class="p">:</span><span class="mi">90</span><span class="p">:</span><span class="mi">03</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">29</span><span class="p">:</span><span class="mi">26</span><span class="p">:</span><span class="mi">52</span>
</pre></div>
</div>
<p>Example of content:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">EMAC</span><span class="o">=</span><span class="mi">02</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">02</span><span class="p">:</span><span class="mi">97</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">01</span> <span class="n">IMAC</span><span class="o">=</span><span class="mi">97</span><span class="p">:</span><span class="n">fe</span><span class="p">:</span><span class="mi">80</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">7</span><span class="n">c</span><span class="p">:</span><span class="n">fe</span><span class="p">:</span><span class="mi">90</span><span class="p">:</span><span class="mi">03</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">29</span><span class="p">:</span><span class="mi">26</span><span class="p">:</span><span class="mi">52</span>
<span class="n">EMAC</span><span class="o">=</span><span class="mi">02</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">61</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">02</span> <span class="n">IMAC</span><span class="o">=</span><span class="mi">61</span><span class="p">:</span><span class="n">fe</span><span class="p">:</span><span class="mi">80</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">7</span><span class="n">c</span><span class="p">:</span><span class="n">fe</span><span class="p">:</span><span class="mi">90</span><span class="p">:</span><span class="mi">03</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">29</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">4</span><span class="n">f</span>
</pre></div>
</div>
</div>
</div>
</div>


              </div>
            </div>
          </div>
          <div class="docs-actions">
          
            <a href="workflow.html"><i class="fa fa-angle-double-left" data-toggle="tooltip" data-placement="top" title="Previous: How Ironic Inspector Works"></i></a>
          
          
            <a href="http-api.html"><i class="fa fa-angle-double-right" data-toggle="tooltip" data-placement="top" title="Next: HTTP API"></i></a>
          
            <a id="logABugLink3" href="" target="_blank" title="Found an error? Report a bug against this page"><i class="fa fa-bug" data-toggle="tooltip" data-placement="top" title="Report a Bug"></i></a>
          
          </div>
          <div class="row docs-byline bottom">
            <div class="docs-updated">updated: 2019-10-31 19:28</div>
          </div>
          <div class="row">
            <div class="col-lg-8 col-md-8 col-sm-8 docs-license">
<a href="https://creativecommons.org/licenses/by/3.0/">
 <img src="../_static/images/docs/license.png" alt="Creative Commons Attribution 3.0 License"/>
</a>
<p>
 Except where otherwise noted, this document is licensed under
 <a href="https://creativecommons.org/licenses/by/3.0/">Creative Commons
 Attribution 3.0 License</a>. See all <a href="http://www.openstack.org/legal">
 OpenStack Legal Documents</a>.
</p>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-4 docs-actions-wrapper">
            <!-- ID buglinkbottom added so that pre-filled doc bugs
                 are sent to Launchpad projects related to the
                 document -->
              <a href="#" id="logABugLink2" class="docs-footer-actions"><i class="fa fa-bug"></i> found an error? report a bug</a>
              <a href="http://ask.openstack.org" class="docs-footer-actions"><i class="fa fa-question-circle"></i> questions?</a>
            </div>
          </div>
        </div>
<div class="col-lg-3 col-md-4 col-sm-4 col-lg-pull-9 col-md-pull-8 col-sm-pull-8 docs-sidebar">
  <div class="btn-group docs-sidebar-releases">
    <button onclick="location.href='/'" class="btn docs-sidebar-home" data-toggle="tooltip" data-placement="top" title="Docs Home"><i class="fa fa-arrow-circle-o-left"></i></button>
<button href="#" type="button" data-toggle="dropdown" class="btn docs-sidebar-release-select">OpenStack Documentation<i class="fa fa-caret-down"></i></button>
    <ul class="dropdown-menu docs-sidebar-dropdown" role="menu" aria-labelledby="dLabel">
      <li role="presentation" class="dropdown-header">Guides</li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#install-guides">Install Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#user-guides">User Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#configuration-guides">Configuration Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#ops-and-admin-guides">Operations and Administration Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#api-guides">API Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#contributor-guides">Contributor Guides</a></li>
      <li role="presentation" class="dropdown-header">Languages</li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/de/">Deutsch (German)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/fr/">Français (French)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/id/">Bahasa Indonesia (Indonesian)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/it/">Italiano (Italian)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/ja/">日本語 (Japanese)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/ko_KR/">한국어 (Korean)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/pt_BR/">Português (Portuguese)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/tr_TR/">Türkçe (Türkiye)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/zh_CN/">简体中文 (Simplified Chinese)</a></li>
    </ul>
  </div>
  <div class="docs-sidebar-toc">
    <div class="docs-sidebar-section" id="table-of-contents">
      <a href="../index.html" class="docs-sidebar-section-title"><h4>ironic-inspector 2019.9.1.dev3</h4></a>
      <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../install/index.html">Install Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration/index.html">Configuration Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">User Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="index.html#how-ironic-inspector-works">How Ironic Inspector Works</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html#how-to-use-ironic-inspector">How to use Ironic Inspector</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#http-api-reference">HTTP API Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#troubleshooting">Troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../admin/index.html">Administrator Guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../contributor/index.html">How To Contribute</a></li>
</ul>

    </div>

  <div class="docs-sidebar-toc">
    <div class="docs-sidebar-section" id="local-table-of-contents">
      <h4 class="docs-sidebar-section-title">Page Contents</h4>
      <ul>
<li><a class="reference internal" href="#">Usage</a><ul>
<li><a class="reference internal" href="#using-from-ironic-api">Using from Ironic API</a></li>
<li><a class="reference internal" href="#node-states">Node States</a></li>
<li><a class="reference internal" href="#introspection-rules">Introspection Rules</a><ul>
<li><a class="reference internal" href="#conditions">Conditions</a></li>
<li><a class="reference internal" href="#actions">Actions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#plugins">Plugins</a></li>
<li><a class="reference internal" href="#discovery">Discovery</a></li>
<li><a class="reference internal" href="#reapplying-introspection-on-stored-data">Reapplying introspection on stored data</a></li>
<li><a class="reference internal" href="#capabilities-detection">Capabilities Detection</a><ul>
<li><a class="reference internal" href="#boot-mode">Boot mode</a></li>
<li><a class="reference internal" href="#cpu-capabilities">CPU capabilities</a></li>
<li><a class="reference internal" href="#infiniband-support">InfiniBand support</a></li>
</ul>
</li>
</ul>
</li>
</ul>

    </div>
  </div>
  </div>
</div>
      </div>
    </div>
<footer>
  <div class="container">
    <div class="row footer-links">
      <div class="col-lg-2 col-sm-2">
        <h3>OpenStack</h3>
        <ul>
          <li><a href="http://openstack.org/projects/">Projects</a></li>
          <li><a href="http://openstack.org/projects/openstack-security/">OpenStack Security</a></li>
          <li><a href="http://openstack.org/projects/openstack-faq/">Common Questions</a></li>
          <li><a href="http://openstack.org/blog/">Blog</a></li>
          <li><a href="http://openstack.org/news/">News</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Community</h3>
        <ul>
          <li><a href="http://openstack.org/community/">User Groups</a></li>
          <li><a href="http://openstack.org/community/events/">Events</a></li>
          <li><a href="http://openstack.org/community/jobs/">Jobs</a></li>
          <li><a href="http://openstack.org/foundation/companies/">Companies</a></li>
          <li><a href="http://docs.openstack.org/infra/manual/developers.html">Contribute</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Documentation</h3>
        <ul>
          <li><a href="http://docs.openstack.org">OpenStack Manuals</a></li>
          <li><a href="http://openstack.org/software/start/">Getting Started</a></li>
          <li><a href="http://developer.openstack.org">API Documentation</a></li>
          <li><a href="https://wiki.openstack.org">Wiki</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Branding & Legal</h3>
        <ul>
          <li><a href="http://openstack.org/brand/">Logos & Guidelines</a></li>
          <li><a href="http://openstack.org/brand/openstack-trademark-policy/">Trademark Policy</a></li>
          <li><a href="http://openstack.org/privacy/">Privacy Policy</a></li>
          <li><a href="https://wiki.openstack.org/wiki/How_To_Contribute#Contributor_License_Agreement">OpenStack CLA</a></li>
        </ul>
      </div>
      <div class="col-lg-4 col-sm-4">
        <h3>Stay In Touch</h3>
        <a href="https://twitter.com/OpenStack" target="_blank" class="social-icons footer-twitter"></a>
        <a href="https://www.facebook.com/openstack" target="_blank" class="social-icons footer-facebook"></a>
        <a href="https://www.linkedin.com/company/openstack" target="_blank" class="social-icons footer-linkedin"></a>
        <a href="https://www.youtube.com/user/OpenStackFoundation" target="_blank" class="social-icons footer-youtube"></a>
        <p class="fine-print">
          The OpenStack project is provided under the
          <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache 2.0 license</a>. Openstack.org is powered by
          <a href="http://rackspace.com" target="_blank">Rackspace Cloud Computing</a>.
        </p>
      </div>
    </div>
  </div>
</footer>
<!-- jQuery -->
<script type="text/javascript" src="../_static/js/jquery-3.2.1.min.js"></script>

<!-- Bootstrap JavaScript -->
<script type="text/javascript" src="../_static/js/bootstrap.min.js"></script>

<!-- The rest of the JS -->
<script type="text/javascript" src="../_static/js/navigation.js"></script>

<!-- Docs JS -->
<script type="text/javascript" src="../_static/js/docs.js"></script>

<!-- Popovers -->
<script type="text/javascript" src="../_static/js/webui-popover.js"></script>

<!-- standard sphinx include libraries, which allow search highlighting -->
<script type="text/javascript" src="../_static/underscore.js"></script>
<script type="text/javascript" src="../_static/doctools.js"></script>
<script type="text/javascript" src="../_static/searchtools.js"></script>

<script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '2019.9.1.dev3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        SOURCELINK_SUFFIX: '.txt',
        HAS_SOURCE:  true
      };
</script>


<!-- Javascript for page -->
<script language="JavaScript">
/* build a description of this page including SHA, source location on git repo,
   build time and the project's launchpad bug tag. Set the HREF of the bug
   buttons */

    var lineFeed = "%0A";
    var gitURL = "Source: Can't derive source file URL";

    /* there have been cases where "pagename" wasn't set; better check for it */
        /* "giturl" is the URL of the source file on Git and is auto-generated by
           openstackdocstheme.

           "pagename" is a standard sphinx parameter containing the name of
           the source file, without extension.                             */

        var sourceFile = "user/usage" + ".rst";
        gitURL = "Source: https://git.openstack.org/cgit/openstack/ironic-inspector/tree/doc/source" + "/" + sourceFile;

    /* gitsha, project and bug_tag rely on variables in conf.py */
    var gitSha = "SHA: 8078a7d117a84fedb405447f7403b0e908afb559";
        var bugProject = "ironic-inspector";
        var bugTitle = "Usage in ironic-inspector";
    var fieldTags = "";
        var useStoryboard = "";


    /* "last_updated" is the build date and time. It relies on the
       conf.py variable "html_last_updated_fmt", which should include
       year/month/day as well as hours and minutes                   */
    var buildstring = "Release: 2019.9.1.dev3 on 2019-10-31 19:28";

    var fieldComment = encodeURI(buildstring) +
                       lineFeed + encodeURI(gitSha) +
                       lineFeed + encodeURI(gitURL) ;

    logABug(bugTitle, bugProject, fieldComment, fieldTags);
</script>


<script type="text/javascript">
    $(document).ready(function(){

          $.ajax({
            context: this,
            dataType : "html",
            url : "https://docs.openstack.org/rocky/badge.html",
            success : function(results) {
                $('#deprecated-badge-container').html(results);
            }
        });
    });
</script>
<div id="deprecated-badge-container"></div>

  </body>
</html>